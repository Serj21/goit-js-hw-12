{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import Axios from 'axios';\n\nconst axios = Axios.create({\n  baseURL: `https://pixabay.com/api/`,\n  params: {\n    key: '42822558-20d699dce07778b8a952c17c9',\n  },\n});\n\nconst loadElem = document.querySelector('.loader');\n\nexport async function fetchImages(query, userPage) {\n  const params = {\n    q: query,\n    per_page: 15,\n    page: userPage,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n\n  try {\n    const res = await axios.get('', { params });\n    return res.data;\n  } catch (error) {\n    throw new Error('Failed to fetch images');\n  }\n}\n\nexport function showLoader() {\n  loadElem.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loadElem.classList.add('hidden');\n}\n","import simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const galleryEl = document.querySelector('.gallery');\n\nconst gallery = new simpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function clearGallery() {\n  galleryEl.innerHTML = '';\n}\n\nexport function renderImages(images) {\n  images.forEach(image => {\n    const markup = `\n    <div class=\"image-card\">\n        <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery-item\" data-title=\"${image.tags}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n        </a>\n        <div class=\"image-info\">\n        <div class =\"image-desc\">\n        <h2 class = \"image-header\">Likes:</h2>\n        <p class=\"header-value\"> ${image.likes}</p>\n        </div>\n         <div class =\"image-desc\">\n        <h2 class = \"image-header\">Views:</h2>\n        <p class=\"header-value\"> ${image.views}</p>\n        </div>\n         <div class =\"image-desc\">\n        <h2 class = \"image-header\">Comments:</h2>\n        <p class=\"header-value\"> ${image.comments}</p>\n        </div>\n         <div class =\"image-desc\">\n        <h2 class = \"image-header\">${image.downloads}</h2>\n        <p class=\"header-value\"> ${image.downloads}</p>\n        </div>\n        </div>\n    </div>\n`;\n    galleryEl.insertAdjacentHTML('beforeend', markup);\n  });\n  gallery.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages, showLoader, hideLoader } from './js/pixabay-api';\nimport { clearGallery, renderImages, galleryEl } from './js/render-functions';\nconsole.log(5);\nconst searchForm = document.querySelector('#search-form');\nconst inputEl = document.querySelector('#search-input');\nconst btnLoadMore = document.querySelector('.js-btn-load');\n\nlet page;\nlet query;\nlet maxPage;\nconst per_page = 15;\n\nbtnLoadMore.addEventListener('click', onLoadMoreClick);\n\niziToast.settings({\n  timeout: 2000,\n  position: 'topRight',\n  transitionIn: 'fadeInUp',\n  transitionOut: 'fadeOutDown',\n});\n\nsearchForm.addEventListener('submit', async e => {\n  e.preventDefault();\n  page = 1;\n  query = inputEl.value.trim();\n  galleryEl.innerHTML = '';\n  hideLoadMoreBtn();\n  if (query === '') {\n    iziToast.error({\n      title: 'Error',\n      message: ' Please enter image name',\n    });\n    return;\n  }\n\n  showLoader();\n  clearGallery();\n\n  try {\n    const data = await fetchImages(query, page);\n    if (data.hits.length === 0) {\n      maxPage = 0;\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      renderImages(data.hits);\n      maxPage = Math.ceil(data.totalHits / per_page);\n    }\n    hideLoader();\n    updateBtnStatus();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images',\n    });\n  }\n});\n\nasync function onLoadMoreClick(e) {\n  page += 1;\n  hideLoadMoreBtn();\n  showLoader();\n\n  try {\n    const data = await fetchImages(query, page);\n    renderImages(data.hits);\n    scroll();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images',\n    });\n  }\n  hideLoader();\n  updateBtnStatus();\n}\n\nfunction updateBtnStatus() {\n  if (page >= maxPage) {\n    hideLoadMoreBtn();\n    iziToast.error({\n      title: 'Error',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } else {\n    showLoadMoreBtn();\n  }\n}\n\nfunction hideLoadMoreBtn() {\n  btnLoadMore.classList.add('hidden');\n}\nfunction showLoadMoreBtn() {\n  btnLoadMore.classList.remove('hidden');\n}\n\nfunction scroll() {\n  const cardElem = galleryEl.firstElementChild;\n  const height = cardElem.getBoundingClientRect().height * 2;\n  scrollBy({\n    behavior: 'smooth',\n    top: height,\n  });\n}\n"],"names":["axios","Axios","loadElem","fetchImages","query","userPage","params","showLoader","hideLoader","galleryEl","gallery","simpleLightbox","clearGallery","renderImages","images","image","markup","searchForm","inputEl","btnLoadMore","page","maxPage","per_page","onLoadMoreClick","iziToast","e","hideLoadMoreBtn","data","updateBtnStatus","scroll","showLoadMoreBtn","height"],"mappings":"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"}